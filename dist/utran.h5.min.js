/**
 * @license
 * utran v1.0.0
 * Copyright (c) 2023 utran.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("ws")):"function"==typeof define&&define.amd?define(["exports","ws"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).utran={},t.WebSocket)}(this,(function(t,e){"use strict";var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+e+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o,s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;r>n;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(o,s){function i(t){try{c(r.next(t))}catch(t){s(t)}}function u(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&o[3]>u[1])){i.label=u[1];break}if(6===u[0]&&o[1]>i.label){i.label=o[1],o=u;break}if(o&&o[2]>i.label){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,s=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}function a(t,e,n){if(n||2===arguments.length)for(var r,o=0,s=e.length;s>o;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}!function(t){t.GET="get",t.RPC="rpc",t.POST="post",t.SUBSCRIBE="subscribe",t.UNSUBSCRIBE="unsubscribe",t.PUBLISH="publish"}(o||(o={}));var l=function(t){function e(e){var n=t.call(this,e)||this;return n.name="FutrueError",n}return r(e,t),e}(Error),h=function(){function t(t){var e=this;this.isPending=!0,this.source=t,this.promise=new Promise((function(t,n){e.reject=n,e.resolve=t}))}return t.prototype.getSource=function(){if(void 0===this.source)throw new l("<Futrue>: 不能获取source，初始化Futrue时未指定。");return this.source},t.prototype.holding=function(){return i(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return void 0!==this.result?[2,this.result]:[4,this.promise];case 1:return[2,t.sent()]}}))}))},t.prototype.getResult=function(){return i(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return void 0!==this.result?[2,this.result]:[4,this.promise];case 1:return[2,t.sent()]}}))}))},t.prototype.finally=function(t){this.promise.finally((function(){return t()}))},t.prototype.setError=function(t){if(!this.isPending)throw new l('任务已完成不能重复调用"setError"方法.');this.reject(t),this.isPending=!1},t.prototype.setResult=function(t){if(!this.isPending)throw new l('任务已完成不能重复调用"setResult"方法.');this.result=t,this.resolve(t),this.isPending=!1},t}(),f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.name="RequestParamError",r.request=n,r}return r(e,t),e}(Error);!function(t){function e(e,n){var r=t.call(this,e)||this;return r.name="RequestFaildError",r.request=n,r}r(e,t)}(Error),function(t){function e(e,n){var r=t.call(this,e)||this;return r.name="RequestBreakError",r.request=n,r}r(e,t)}(Error);var p=function(t){function e(e){var n=t.call(this,e)||this;return n.name="LoaclWaitTimoutError",n}return r(e,t),e}(Error),d=function(t){function e(e){var n=t.call(this,e)||this;return n.name="ConnectionFaildError",n}return r(e,t),e}(Error);function v(t,e){var n;t.requestType===o.RPC?n={id:t.id,responseType:t.requestType,state:0,methodName:t.methodName,error:e}:n={id:t.id,responseType:t.requestType,state:0,error:e};return n}var y,g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setRequest2Faild=function(t){var e=v(this.getSource(),t);return this.setResult(e),e},e}(h),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setRequest2Faild=function(t){var e=v(this.getSource(),t);return this.setResult(e),e},e.prototype.getFullRequest=function(){return this.getSource()},e.prototype.getUtRequest=function(){return t=this.getFullRequest(),void 0===(e=JSON.parse(JSON.stringify(t))).timeout||delete e.timeout,e;var t,e},e}(h),m=function(){function t(t){void 0===t&&(t="Cache"),this.name=t,this.data={}}return t.prototype.push=function(t,e){void 0!==this.data[t]&&console.warn("<".concat(this.name,"[").concat(t,"]>: is overwritten!")),this.data[t]=e},t.prototype.pop=function(t){if(void 0!==this.data[t]){var e=this.data[t];return delete this.data[t],e}return null},t.prototype.getAllData=function(){return Object.values(this.data)},t.prototype.clear=function(){var t=Object.values(this.data);return this.data={},t},t}(),b=function(t){function e(){return t.call(this,"FullRequstFutureCache")||this}return r(e,t),e.prototype.setAllRequest2Faild=function(t){this.clear().forEach((function(e){e.setRequest2Faild(t)}))},e.prototype.getAllUtRequest=function(){return this.getAllData().map((function(t){return t.getUtRequest()}))},e}(m);!function(t){t.RUNING="正常运行中",t.DISCONECTION="连接断开",t.UN_START="客户端未启动",t.RECONNECTING="正在重连中",t.RECONNECT_FAILDE="重连失败",t.CONNECT_FAILED="连接服务端失败"}(y||(y={}));var E=function(){function t(t,e){void 0===e&&(e=""),this.state=t,this.extra=e}return t.prototype.changeState=function(t,e){void 0===e&&(e=""),this.state=t,this.extra=e},t.prototype.getState=function(){return this.state},t.prototype.getMsg=function(){return""===this.extra?this.state:this.state+","+this.extra},t}(),w=function(){function t(){this.handler=[],this.topics=[]}return t.prototype.add=function(){for(var t=[],e=0;arguments.length>e;e++)t[e]=arguments[e];var n=this;t.forEach((function(t){n.topics.push(t[0]),n.handler.push(t[1])}))},t.prototype.getCallback=function(t){var e=this;return e.handler.filter((function(n,r){return t===e.topics[r]}))},t.prototype.getAllTopics=function(){return this.topics},t.prototype.remove=function(t){for(var e=this,n=this.topics.length-1;n>=0;n--)e.topics[n]===t&&(e.topics.splice(n,1),e.handler.splice(n,1))},t}();function C(t,e){return"object"==typeof t&&"name"in t&&t.name===e.name}function q(){return"undefined"==typeof window}function N(t){return(new TextDecoder).decode(t)}function S(t){return"string"==typeof t?t:q()?(e=t instanceof ArrayBuffer?N(t):t)instanceof Buffer?""+e:e instanceof Array?e.map((function(t){return""+t})).join(""):e:e=t instanceof ArrayBuffer?N(t):t;var e}function F(){for(var t=[],e=0;arguments.length>e;e++)t[e]=arguments[e];var n=s({},t),r=[],o={};return Object.keys(n).forEach((function(t,e){var s=n[t];parseInt(t)===e?"object"==typeof s?Object.assign(o,s):r.push(s):o[t]=s})),{args:r,dicts:o}}var T=Object.values(o);var O=function(t){function e(){return t.call(this,"RequestFutureCache")||this}return r(e,t),e}(m),I="请求失败，连接非安全退出而中断",k=function(){function t(t,e,n){void 0===e&&(e=function(){}),void 0===n&&(n=function(){}),this.url=t,this.disconnectCallback=e,this.publishCallback=n,this.requestFutureCahe=new O,this.allMsgListener=[],this.allOpenListener=[],this.allCloseListener=[],this.allErrorListener=[],this.isruning=!1,this.isSafeExit=!1,this.isNodePlatform=q(),this.disconnectCallback=e,this.publishCallback=n}return t.prototype.getState=function(){return this.isruning},t.prototype.start=function(){return i(this,void 0,void 0,(function(){var t,n=this;return u(this,(function(r){switch(r.label){case 0:return(t=this).isruning?[4,t.startFutrue.holding()]:[3,2];case 1:case 3:return[2,r.sent()];case 2:return t.isruning=!0,t.startFutrue=new h,t.soket=new e(t.url),t.onError((function(e){console.error("连接出错: ".concat(e+"")),t.startFutrue.setError(new d(e+""))}),!0),t.onMessage((function(e){i(n,void 0,void 0,(function(){var n,r;return u(this,(function(o){switch(o.label){case 0:return(n=e.data)instanceof Blob?[4,n.arrayBuffer()]:[3,2];case 1:n=o.sent(),o.label=2;case 2:return"ok"===(r=S(n))?(console.log("连接成功."),t.isSafeExit=!1,t.initListener(),t.startFutrue.setResult(t)):t.startFutrue.setError(new d(r)),[2]}}))})).then((function(){})).catch((function(e){console.error(e),t.startFutrue.setError(new d(e))}))}),!0),t.onClose((function(){console.log("连接关闭."),t.isruning=!1}),!0),[4,t.startFutrue.holding()]}}))}))},t.prototype.send=function(t,e){return i(this,void 0,void 0,(function(){var n,r,s,i;return u(this,(function(u){switch(u.label){case 0:return n=new g(t),this.requestFutureCahe.push(t.id,n),r=function(t){if("number"!=typeof t.id)return new f('请求体必需包含"id"字段,且必须是number',t);if(!T.includes(t.requestType))return new f('请求体必需包含"requestType"字段,且值必须是['.concat(""+T,"]其中之一."),t);var e=t.requestType;return e===o.RPC?"methodName"in t?"args"in t?"dicts"in t?null:new f("".concat(o.RPC,'请求必须有"dicts"字段.'),t):new f("".concat(o.RPC,'请求必须有"args"字段.'),t):new f("".concat(o.RPC,'请求必须有"methodName"字段.'),t):e===o.SUBSCRIBE||e===o.UNSUBSCRIBE?"topics"in t?null:new f("".concat(t.requestType,'请求必须有"topics"字段.'),t):null}(t),null===r?[3,2]:(n.setError(r),[4,n.getResult()]);case 1:case 3:return[2,u.sent()];case 2:return this.soket.send((c=t,(new TextEncoder).encode(JSON.stringify(c)).buffer)),"number"==typeof e&&(s=this,i=setTimeout((function(){s.requestFutureCahe.pop(t.id),n.setRequest2Faild("本地等待超时：".concat(e,"s"))}),1e3*e),n.finally((function(){void 0!==i&&clearTimeout(i)}))),[4,n.getResult()]}var c}))}))},t.prototype.initListener=function(){var t=this;t.offAllListener(),t.onMessage(t.onResponse.bind(t)),t.onError((function(t){console.warn("onError错误:".concat(t.error+""))})),t.onClose((function(){var e=t.requestFutureCahe.clear();t.isSafeExit?t.requestFutureCahe.clear().forEach((function(t){t.setRequest2Faild("请求失败，Socket已执行退出关闭")})):e.forEach((function(t){t.setRequest2Faild(I)})),t.isruning=!1,t.offAllListener(),t.disconnectCallback(t.isSafeExit)}))},t.prototype.exit=function(){this.isSafeExit=!0,this.soket.close(),console.log("程序退出")},t.prototype.offAllListener=function(){var t=this;this.allMsgListener.forEach((function(e){t.soket.removeEventListener("message",e)})),this.allOpenListener.forEach((function(e){t.soket.removeEventListener("open",e)})),this.allCloseListener.forEach((function(e){t.soket.removeEventListener("close",e)})),this.allErrorListener.forEach((function(e){t.soket.removeEventListener("error",e)}))},t.prototype.onMessage=function(t,e){void 0===e&&(e=!1),this.allMsgListener.push(t),this.soket.addEventListener("message",t,{once:e})},t.prototype.onOpen=function(t,e){void 0===e&&(e=!1),this.allOpenListener.push(t),this.soket.addEventListener("open",t,{once:e})},t.prototype.onClose=function(t,e){void 0===e&&(e=!1),this.allCloseListener.push(t),this.soket.addEventListener("close",t,{once:e})},t.prototype.onError=function(t,e){void 0===e&&(e=!1),this.allErrorListener.push(t),this.soket.addEventListener("error",t,{once:e})},t.prototype.onResponse=function(t){var e=S(t.data),n=JSON.parse(e);if(n.responseType===o.PUBLISH){var r=n.result;this.publishCallback(r.topic,r.msg)}if([o.RPC,o.SUBSCRIBE,o.UNSUBSCRIBE].includes(n.responseType)){var s=this.requestFutureCahe.pop(n.id);null!==s&&s.setResult(n)}},t}(),P=function(t){function e(e,n){void 0===n&&(n={});var r=this,o=n.username,s=n.password,i=n.maxReconnectNum,u=void 0===i?32:i,c=n.timeout,a=n.outputResult,l=void 0!==a&&a,h=n.defaultResult,f=n.throwTimeoutError,p=void 0!==f&&f,d=function(t,e){var n=btoa("".concat(t,":").concat(e));return"Basic ".concat(n)}(void 0===o?"utranhost":o,void 0===s?"utranhost":s);return(r=t.call(this,e,d,u)||this).timeout=c,r.outputResult=l,r.defaultResult=h,r.throwTimeoutError=p,r}return r(e,t),e.prototype.setOptions=function(t){return this.tempOpts=t,this},e.prototype.getOptions=function(t){void 0===t&&(t=!0);var e=this.tempOpts,n=e.timeout,r=e.outputResult,o=e.defaultResult,s=e.throwTimeoutError;return n=void 0===n?this.timeout:n,r=void 0===r?this.outputResult:r,o=void 0===o?this.defaultResult:o,s=void 0===s?this.throwTimeoutError:s,t&&(this.tempOpts={}),{timeout:n,outputResult:r,defaultResult:o}},e.prototype.callByName=function(t){for(var e=[],n=1;arguments.length>n;n++)e[n-1]=arguments[n];return i(this,void 0,void 0,(function(){var n,r,s,i,l,h,f,p,d;return u(this,(function(u){switch(u.label){case 0:return n=this.getOptions(),r=n.timeout,s=n.outputResult,i=n.defaultResult,l=F.apply(void 0,a([],c(e),!1)),h=l.args,f=l.dicts,p=this.genRequestId(),[4,this.sendRequest({id:p,requestType:o.RPC,methodName:t,args:h,dicts:f,timeout:r})];case 1:return d=u.sent(),!0===s?[2,void 0===d.result?i:d.result]:[2,d]}}))}))},e.prototype.multicall=function(){for(var t=[],e=0;arguments.length>e;e++)t[e]=arguments[e];return i(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._multicall(t)];case 1:return[2,e.sent()]}}))}))},e.prototype._multicall=function(t){return i(this,void 0,void 0,(function(){var e,n,r,s,i,l,h,f,d,v,y,g,R,m,b,E,w,C,q,N;return u(this,(function(u){switch(u.label){case 0:for(e=this.getOptions(),r=e.outputResult,s=e.defaultResult,i=e.throwTimeoutError,l=this,h="multicall本地等待超时：".concat(n=e.timeout,"s"),f=[],d=[],v=[],y=!1,"number"==typeof n&&setTimeout((function(){y=!0}),1e3*n),q=0;t.length>q;q++){if(y&&!0===i)throw new p(h);R=F.apply(void 0,a([],c((g=t[q]).params),!1)),m=R.args,b=R.dicts,E=g.methodName,w=this.genRequestId(),C=l.sendRequest2({id:w,requestType:o.RPC,methodName:E,args:m,dicts:b,timeout:n}),d.push(C),f.push(C.getResult())}q=0,u.label=1;case 1:if(f.length<=q)return[3,4];if(y){if(!0===i)throw new p(h);return v=[],d.forEach((function(t){l.fullRequstFutureCache.pop(t.getSource().id),v.push(!0===r?t.isPending?s:t.result.result:t.isPending?t.setRequest2Faild(h):t.result.result)})),[3,4]}return[4,f[q]];case 2:N=u.sent(),v.push(!0!==r?N:void 0!==N.result?N.result:s),u.label=3;case 3:return q++,[3,1];case 4:return[2,v]}}))}))},e}(function(){function t(t,e,n){void 0===n&&(n=32),this.requestId=0,this.fullRequstFutureCache=new b,this.state=new E(y.UN_START),this.topicHandlers=new w,this.url="".concat(t,"?ticket=").concat(e),this.socket=new k(this.url,this.onDisconnect.bind(this),this.onPublish.bind(this)),this.maxReconnectNum=n}return t.prototype.start=function(){return i(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.socket.start()];case 1:return e.sent(),this.state.changeState(y.RUNING),[2,!0];case 2:return t=e.sent(),this.state.changeState(y.CONNECT_FAILED,t),[2,!1];case 3:return[2]}}))}))},t.prototype.genRequestId=function(){return this.requestId++,this.requestId},t.prototype.onDisconnect=function(t,e){void 0===e&&(e=0);var n=this,r=n.fullRequstFutureCache.getAllUtRequest();if(n.reconnectFuture=new h,t)return n.state.changeState(y.RECONNECT_FAILDE),n.fullRequstFutureCache.setAllRequest2Faild("请求发送失败，原因:执行安全退出"),void n.reconnectFuture.setResult(!1);console.warn("尝试重连:".concat(e,"/").concat(n.maxReconnectNum)),n.state.changeState(y.DISCONECTION),new k(this.url,this.onDisconnect.bind(this),this.onPublish.bind(this)).start().then((function(t){n.socket=t,n.state.changeState(y.RUNING),n.reSubscribe().finally((function(){})),r.forEach((function(e){t.send(e).then((function(t){n.state.changeState(y.RUNING);var e=n.fullRequstFutureCache.pop(t.id);null!==e&&e.isPending&&e.setResult(t)})).catch((function(t){n.state.changeState(y.DISCONECTION),console.warn("重发[".concat(e.requestType,"]").concat(e.id,"请求失败:").concat(t+""))}))})),n.reconnectFuture.setResult(!0)})).catch((function(t){console.warn("连接失败，剩余重连：".concat(e,"/").concat(n.maxReconnectNum)),n.maxReconnectNum>e?(n.state.changeState(y.RECONNECTING),e++,setTimeout((function(){n.onDisconnect(!1,e)}),1e3*Math.log(e)*2)):(n.state.changeState(y.RECONNECT_FAILDE),n.fullRequstFutureCache.setAllRequest2Faild("请求发送失败，原因:".concat(n.state.getMsg())),n.reconnectFuture.setResult(!1),console.error("连接失败，结束重连.\n".concat(t+"")))}))},t.prototype.onPublish=function(t,e){this.topicHandlers.getCallback(t).forEach((function(n){n(t,e)}))},t.prototype.reSubscribe=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,s,i,c;return u(this,(function(u){switch(u.label){case 0:if(t=this.genRequestId(),0===(e=this.topicHandlers.getAllTopics()).length)return[2,!0];console.log("重新订阅:",e),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.socket.send({id:t,requestType:o.SUBSCRIBE,topics:e})];case 2:return 1===(n=u.sent()).state?(s=(r=n.result).allTopics,i=r.subTopics,c=e.filter((function(t){return!s.includes(t)})),console.log("已重新订阅:",i),0!==c.length?(console.error("有未成功的订阅:",c),[2,!1]):[2,!0]):[2,!1];case 3:return u.sent(),[2,!1];case 4:return[2]}}))}))},t.prototype.sendRequest2=function(t){var e=t.id,n=this,r=new R(t);return n.state.getState()!==y.RUNING?(r.setRequest2Faild("请求发送失败，原因:".concat(n.state.getMsg())),r):(n.fullRequstFutureCache.push(e,r),n.socket.send(r.getUtRequest(),t.timeout).then((function(t){t.error!==I&&(r.isPending&&r.setResult(t),n.fullRequstFutureCache.pop(e))})).catch((function(t){C(t,f)&&r.isPending&&r.setResult(t)})),r)},t.prototype.sendRequest=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o;return u(this,(function(s){switch(s.label){case 0:if(e=t.id,n=new R(t),this.state.getState()!==y.RUNING)return[2,n.setRequest2Faild("请求发送失败，原因:".concat(this.state.getMsg()))];this.fullRequstFutureCache.push(e,n),s.label=1;case 1:return s.trys.push([1,5,,7]),[4,this.socket.send(n.getUtRequest(),t.timeout)];case 2:return(r=s.sent()).error!==I?[3,4]:[4,n.getResult()];case 3:return[2,s.sent()];case 4:return n.isPending&&n.setResult(r),this.fullRequstFutureCache.pop(e),[2,r];case 5:if(C(o=s.sent(),f))throw o;return[4,n.getResult()];case 6:return[2,s.sent()];case 7:return[2]}}))}))},t.prototype.subscribe=function(t,e,n,r){return void 0===r&&(r=!1),i(this,void 0,void 0,(function(){var s,i;return u(this,(function(u){switch(u.label){case 0:return s=this.genRequestId(),[4,this.sendRequest({id:s,requestType:o.SUBSCRIBE,topics:[t],timeout:n})];case 1:return 1!==(i=u.sent()).state||r||this.topicHandlers.add([t,e]),[2,i]}}))}))},t.prototype.unsubscribe=function(t,e){return i(this,void 0,void 0,(function(){var n,r,s;return u(this,(function(i){switch(i.label){case 0:return n=this.genRequestId(),[4,this.sendRequest({id:n,requestType:o.UNSUBSCRIBE,topics:t,timeout:e})];case 1:return 1===(r=i.sent()).state&&(s=this,t.forEach((function(t){s.topicHandlers.remove(t)}))),[2,r]}}))}))},t.prototype.exit=function(){try{this.socket.exit()}catch(t){this.onDisconnect(!0)}console.log("安全退出.")},t}()),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._methodName="",e._options={},e}return r(e,t),e}(Function);var _=function(t){function e(){var e,n,r,o=null!==t&&t.apply(this,arguments)||this;return o.call=(e=o,n=new L,r=new Proxy(n,{get:function(t,e){return"string"==typeof e?(n._methodName+=""===n._methodName?e:".".concat(e),r):t[e]},apply:function(t,o,s){if(""===t._methodName)return t._options=s[0],r;e.setOptions(0!==Object.keys(n._options).length?n._options:e._get_opts()),n._options={};var i=t._methodName;return t._methodName="",e.callByName.apply(e,a([i],c(s),!1))}})),o}return r(e,t),e.prototype._get_opts=function(){return this.tempOpts},e}(P);t.Client=_,t.version=function(){return"1.0.0"}}));
